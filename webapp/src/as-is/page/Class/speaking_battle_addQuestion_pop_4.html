<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="../../js/jquery-1.12.4.js"></script>
    <script src="../../js/jquery-ui.js"></script>
    <link rel="stylesheet" href="../../css/reset.css">
    <link rel="stylesheet" href="../../css/studio.css">
    <link rel="stylesheet" href="Class.css">
    <link rel="stylesheet" href="../../css/simplebar.css">
</head>
<body>
    <div id="root">
        <div class="container">
            <div id="header" class="tab-select"> <!-- 탭이 선택되면 tab-select 추가 (밑줄 사라짐)-->
                <div class="header-inner">
                    <div class="logo-wrap">
                        <h1><a href="#"><img src="../../img/logo_studio.png" alt=""></a></h1>
                    </div>
                    <div class="header-tab-wrap">
                        <div class="inner">
                            <div class="tab on thema-purple"> <!-- thema-green, pink, orange, purple 로 색변경 / 활성화된건 on -->
                                <div class="tab-inner">
                                    <p>생활회화 A반 생활회화 A반</p>
                                    <button class="btn-header-tab-close"></button>
                                </div>
                            </div>
                            <div class="tab thema-orange">
                                <div class="tab-inner">
                                    <p>생활회화 A반 생활회화 A반</p>
                                    <button class="btn-header-tab-close"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile-wrap">
                        <div class="profile-info-wrap">
                            <div class="academy">현대영어사</div>
                            <div class="bar"></div>
                            <div class="user"><strong>김선생</strong> (선생님)</div> 
                        </div>
                        <div class="profile-menu-wrap">
                            <button class="btn-profile-menu"></button>                            
                        </div>
                    </div>
                </div>
            </div>
            <div id="contents" class="thema-purple"> <!-- thema-green, pink, orange, purple 로 색변경 -->
                <div class="contents-inner">

                    <div id="edit">
                        <div class="class-info-title-wrap">
                            <div class="title-wrap">
                                <div class="top-wrap">
                                    <div class="academy">현대영어사</div>
                                    <div class="bar"></div>
                                    <div class="className text-thema-color">생활회화 A반</div>
                                    <button class="btn-edit"></button>
                                </div>
                                <div class="btm-wrap">
                                    <div class="lang">학습 언어: 영어 - 가이드 언어: 한국어</div>
                                    <div class="date">2020-09-01 ~ 2020-12-31</div>
                                </div>
                            </div>
                        </div>
                        <div class="edit-cont-wrap">
                            <div class="edit-tab-wrap">
                                <div class="btn-thema-color">수강생</div>
                                <div class="btn-thema-color">학습 콘텐츠</div>
                                <div class="btn-thema-color">리포트</div>
                                <div class="btn-thema-color on">스피킹 배틀</div> <!-- on 추가시 해당 탭 활성화-->
                            </div>
                            <div class="edit-box-wrap">
                                <div class="tab-cont-wrap">
                                    <div class="tab-cont"></div>
                                    <div class="tab-cont"></div>
                                    <div class="tab-cont"></div>
                                    <div class="tab-cont on"> <!-- on 추가시 해당 탭 활성화-->

                                        <!-- 스피킹 배틀 -->
                                        <div id="speakingBattle-contents">
                                            <div class="left-box-wrap">
                                                <div class="question-title-wrap">
                                                    <i class="ico_battle"></i>
                                                    <strong>모둠반 간식 대항 스피킹 배틀</strong>
                                                </div>
                                                <div class="tab-nav-wrap type-02">
                                                    <ul>
                                                        <li class="on">문제 보기</li> <!-- 활성화 on -->
                                                        <li>결과 순위</li>
                                                    </ul>
                                                </div>
                                                <div class="tab-cont-wrap">
                                                    <div class="tab-cont on"> <!-- on 추가시 해당 tab-cont 표시 -->
                                                        <!-- 문제 보기 -->
                                                        <div class="learning-regist-wrap">
                                                            <div class="scroll-wrap" data-simplebar data-simplebar-auto-hide="false"> 
                                                                <div class="btm-section">                       
                                                                    <div class="question-list-wrap type-half">
                                                                        <p class="question-title">속도 느림(12개) - 문장이 느린 속도로 내려옵니다.</p>
                                                                        <div class="question-half-wrap">
                                                                            <ul>
                                                                                <li>
                                                                                    <div class="num">1</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">2</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">3</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">4</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">5</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                            </ul>
                                                                            <ul>
                                                                                <li>
                                                                                    <div class="num">6</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">7</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">8</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">9</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">10</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                            </ul>
                                                                        </div>
                                                                    </div>
                                                                    <div class="question-list-wrap type-half">
                                                                        <p class="question-title">속도 보통(08개) - 문장이 보통 속도로 내려옵니다.</p>
                                                                        <div class="question-half-wrap">
                                                                            <ul>
                                                                                <li>
                                                                                    <div class="num">1</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">2</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">3</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">4</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">5</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                            </ul>
                                                                            <ul>
                                                                                <li>
                                                                                    <div class="num">6</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">7</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">8</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">9</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">10</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                            </ul>
                                                                        </div>
                                                                    </div>
                                                                    <div class="question-list-wrap type-half">
                                                                        <p class="question-title">속도 빠름(08개) - 문장이 빠른 속도로 내려옵니다.</p>
                                                                        <div class="question-half-wrap">
                                                                            <ul>
                                                                                <li>
                                                                                    <div class="num">1</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">2</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">3</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">4</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">5</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                            </ul>
                                                                            <ul>
                                                                                <li>
                                                                                    <div class="num">6</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">7</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">8</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">9</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                                <li>
                                                                                    <div class="num">10</div>
                                                                                    <div class="text-wrap">
                                                                                        <div class="top-text">I Want a Cheeseburger.</div>
                                                                                    </div>
                                                                                </li>
                                                                            </ul>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="tab-cont">                                                        
                                                        <!-- 결과 순위 -->
                                                        <div class="ranking-wrap">
                                                            <div class="ranking-title-wrap">
                                                                <div class="title">참가자 <strong>35</strong>명</div>
                                                                <div class="bar"></div>
                                                                <div class="selectBox-wrap">
                                                                    <div class="selectOption">랭킹순</div>
                                                                    <div class="optionList">
                                                                        <ul>
                                                                            <li class="on">랭킹순</li> <!-- 선택중인건 on -->
                                                                            <li>이름순</li>
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="ranking-table-wrap">
                                                                <div class="header-table">
                                                                    <table>
                                                                        <tr>
                                                                            <th>순위</th>
                                                                            <th>이름</th>
                                                                            <th>아이디</th>
                                                                            <th>참가일</th>
                                                                            <th>소요시간</th>
                                                                            <th>재시도 횟수</th>
                                                                            <th>맞은 개수</th>
                                                                        </tr>
                                                                    </table>
                                                                </div>
                                                                <div class="body-table">
                                                                    <div class="scroll-wrap" data-simplebar data-simplebar-auto-hide="false"> 
                                                                        <table>
                                                                            <tr class="complete"> <!-- 학습 완료된 행은 complete 추가 -->
                                                                                <td class="num">1</td>
                                                                                <td class="student-name">가학생</td>
                                                                                <td class="student-id">student001</td>
                                                                                <td class="date">2020-10-22 15:20</td>
                                                                                <td class="time">60초</td>
                                                                                <td class="retry-count">6</td>
                                                                                <td class="correct-count">
                                                                                    <strong>30</strong>/30
                                                                                </td>
                                                                            </tr>
                                                                            <tr class="complete"> <!-- 학습 완료된 행은 complete 추가 -->
                                                                                <td class="num">2</td>
                                                                                <td class="student-name">가학생</td>
                                                                                <td class="student-id">student001</td>
                                                                                <td class="date">2020-10-22 15:20</td>
                                                                                <td class="time">60초</td>
                                                                                <td class="retry-count">6</td>
                                                                                <td class="correct-count">
                                                                                    <strong>30</strong>/30
                                                                                </td>
                                                                            </tr>
                                                                            <tr class="complete"> <!-- 학습 완료된 행은 complete 추가 -->
                                                                                <td class="num">3</td>
                                                                                <td class="student-name">가학생</td>
                                                                                <td class="student-id">student001</td>
                                                                                <td class="date">2020-10-22 15:20</td>
                                                                                <td class="time">60초</td>
                                                                                <td class="retry-count">6</td>
                                                                                <td class="correct-count">
                                                                                    <strong>30</strong>/30
                                                                                </td>
                                                                            </tr>
                                                                            <tr class="complete"> <!-- 학습 완료된 행은 complete 추가 -->
                                                                                <td class="num">4</td>
                                                                                <td class="student-name">가학생</td>
                                                                                <td class="student-id">student001</td>
                                                                                <td class="date">2020-10-22 15:20</td>
                                                                                <td class="time">60초</td>
                                                                                <td class="retry-count">6</td>
                                                                                <td class="correct-count">
                                                                                    <strong>30</strong>/30
                                                                                </td>
                                                                            </tr>
                                                                            <tr class="complete"> <!-- 학습 완료된 행은 complete 추가 -->
                                                                                <td class="num">5</td>
                                                                                <td class="student-name">가학생</td>
                                                                                <td class="student-id">student001</td>
                                                                                <td class="date">2020-10-22 15:20</td>
                                                                                <td class="time">60초</td>
                                                                                <td class="retry-count">6</td>
                                                                                <td class="correct-count">
                                                                                    <strong>30</strong>/30
                                                                                </td>
                                                                            </tr>
                                                                            <tr class="complete"> <!-- 학습 완료된 행은 complete 추가 -->
                                                                                <td class="num">6</td>
                                                                                <td class="student-name">가학생</td>
                                                                                <td class="student-id">student001</td>
                                                                                <td class="date">2020-10-22 15:20</td>
                                                                                <td class="time">60초</td>
                                                                                <td class="retry-count">6</td>
                                                                                <td class="correct-count">
                                                                                    <strong>30</strong>/30
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td class="num">-</td>
                                                                                <td class="student-name">가학생</td>
                                                                                <td class="student-id">student001</td>
                                                                                <td class="date">미완료</td>
                                                                                <td class="time">-</td>
                                                                                <td class="retry-count">-</td>
                                                                                <td class="correct-count">-</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td class="num">-</td>
                                                                                <td class="student-name">가학생</td>
                                                                                <td class="student-id">student001</td>
                                                                                <td class="date">미완료</td>
                                                                                <td class="time">-</td>
                                                                                <td class="retry-count">-</td>
                                                                                <td class="correct-count">-</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td class="num">-</td>
                                                                                <td class="student-name">가학생</td>
                                                                                <td class="student-id">student001</td>
                                                                                <td class="date">미완료</td>
                                                                                <td class="time">-</td>
                                                                                <td class="retry-count">-</td>
                                                                                <td class="correct-count">-</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td class="num">-</td>
                                                                                <td class="student-name">가학생</td>
                                                                                <td class="student-id">student001</td>
                                                                                <td class="date">미완료</td>
                                                                                <td class="time">-</td>
                                                                                <td class="retry-count">-</td>
                                                                                <td class="correct-count">-</td>
                                                                            </tr>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="contents-empty-img-wrap type-rank" style="display: none;"> <!-- 순위가 없을 때 노출 -->
                                                            <img src="../../img/img_speaking_battle_empty_02.png" alt="">
                                                            <p><strong>참여한 학생이 없습니다.</strong></p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="right-box-wrap qa-library type-02">
                                                <div class="top-title-wrap type-border">
                                                    <strong>문제 히스토리</strong>
                                                </div>
                                                <div class="data-list">
                                                    <div class="scroll-wrap" data-simplebar data-simplebar-auto-hide="false">
                                                        <div class="data-item-wrap">
                                                            <div class="data-info-card type-ing"> <!-- 진행중 type-ing -->
                                                                <div class="text-wrap">
                                                                    <div class="top-text-wrap">
                                                                        <div class="tag tag-shor ing">진행중</div>
                                                                        <p>모둠반 간식 대항 스피킹 배틀</p>
                                                                    </div>
                                                                    <div class="btm-text-wrap">
                                                                        <span>참여현황: 25/30</span>
                                                                        <span>기간: 상시운영</span>
                                                                    </div>
                                                                    <div class="btm-date-wrap">
                                                                        <p>등록일: 22.06.07</p>
                                                                    </div>
                                                                </div>
                                                                <div class="btn-wrap">
                                                                    <button type="button" class="btn btn-edit">수정</button>
                                                                </div>
                                                            </div>
                                                            <div class="data-info-card type-edit"> <!-- 진행중, 편집중은 type-ing -->
                                                                <div class="text-wrap">
                                                                    <div class="top-text-wrap">
                                                                        <div class="tag edit">편집중</div>
                                                                        <p>모둠반 간식 대항 스피킹 배틀</p>
                                                                    </div>
                                                                    <div class="btm-text-wrap">
                                                                        <span>참여현황: 25/30</span>
                                                                        <span>기간: 상시운영</span>
                                                                    </div>
                                                                    <div class="btm-date-wrap">
                                                                        <p>등록일: 22.06.07</p>
                                                                    </div>
                                                                </div>
                                                                <div class="btn-wrap">
                                                                    <button type="button" class="btn btn-edit">수정</button>
                                                                </div>
                                                            </div>
                                                            <div class="data-info-card type-end"> <!-- 종료는 type-end -->
                                                                <div class="text-wrap">
                                                                    <div class="top-text-wrap">
                                                                        <div class="tag end">종료</div>
                                                                        <p>모둠반 간식 대항 스피킹 배틀</p>
                                                                    </div>
                                                                    <div class="btm-text-wrap">
                                                                        <span>참여현황: 25/30</span>
                                                                        <span>기간: 상시운영</span>
                                                                    </div>
                                                                    <div class="btm-date-wrap">
                                                                        <p>등록일: 22.06.07</p>
                                                                    </div>
                                                                </div>
                                                                <div class="btn-wrap">
                                                                    <button type="button" class="btn btn-copy">복사</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="copyright-wrap">
                            <div class="copyright-link-wrap">
                                <a href="#">이용약관</a>
                                <a href="#"><strong>개인정보처리방침</strong></a>
                                <div class="bar"></div>
                            </div>
                            <p class="copyright">Copyright ©2020 LG CNS. All right reserved.</p>
                        </div>
                        <div class="modal-wrap">
                            <div class="modal-confirm">
                                <div class="title-wrap">
                                    <strong>스피킹배틀을<br>복사하시겠습니까?</strong>
                                    <button class="btn-modal-title-close"></button>
                                </div>
                                <div class="modal-footer-btn-wrap">
                                    <button class="btn-line">취소</button>
                                    <button class="btn-navy">확인</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../../js/simplebar.js"></script>
    <script src="../../js/common.js"></script>
    <script>

        // 기간설정 클릭시 기간 input 노출
        $(".period-wrap > .period > .btn-period").on('click', function(){
            if($(this).hasClass('date')){
                $(this).parent().siblings().addClass('on');
            }else {
                $(this).parent().siblings().removeClass('on');
            }            
        })

        // 체크박스 클릭 시 data-info-card 선 색상 변경
        $("#speakingBattle-contents .data-list-wrap input[type=checkbox]").click(function () {
            if ($(this).is(":checked")) {
                $(this).parent().addClass('on');
            }
            else {
                $(this).parent().removeClass('on');
            }
        });

        // draggable 과 sortable을 이어줄 data값 2020-12-03 수정
        var dragData = 0;

        $( "#speakingBattle-contents .lesson-list-wrap .accordion-cont-wrap").sortable({
            placeholder:"drag-enter-bg", // 드래그 들어왔을때 영역 표시
            handle: ".btn-card-handle",
            over:function(){
                // 드래그해서 안에 들어왔을 때

                // 테두리 표시를 위한 drag-enter
                $(this).parents('.lesson-box-wrap').addClass('drag-enter');                

                // 빈칸 안내문구 잠시 안보이기
                $(this).find('.lesson-empty').addClass('hide');
            },            
            out:function(){
                // 드래그했다 나갔을 때

                // 테두리 제거
                $(this).parents('.lesson-box-wrap').removeClass('drag-enter');

                // 빈칸 안내문구 다시 보이기
                $(this).find('.lesson-empty').removeClass('hide');
            },
            update:function(event, ui){

                // 다중 선택된 드래그 구분
                if(ui.item.hasClass('drag-all-card')){
                    alert('다중선택 드래그')
                }

                // 내용 바뀌었을때
                var text_top = ui.item.find('.top-text-wrap').html();
                var text_btm = ui.item.find('.btm-text-wrap').html();

                // 드래그 된 내용 재생성
                var html = '';
                html += '<div class="num"></div>'
                html += '<div class="data-info-card cardType-contents">'
                html += '<div class="text-wrap">'
                html += '<div class="top-text-wrap">' + text_top + '</div>'
                html += '</div>'
                html += '<div class="card-btn-wrap">'
                html += '<button class="btn-card-delete"></button>'            
                html += '</div>'            
                html += '</div>'
                ui.item.attr('class', 'lesson-item');
                ui.item.html(html);// 레슨명 표시됐을때 0331 수정

                // 빈칸 안내문구 안보이기
                $(this).find('.lesson-empty').addClass('empty-hide');
                
                // index 
                $(this).find('.lesson-item').each(function(i, box){
                    $(box).find(".num").html(i + 1);
                })

                // 드래그 한것과 드래그 된것을 일치시켜주기 위한 data속성 (2021-06-22)
                if(!ui.item.is('[data]')){
                    ui.item.attr('data', dragData);
                    dragData++;
                }
            },
            receive: function (event, ui) { // 드래그 했던 대상 컨트롤 (2020-12-04)
                // 드래그 했던 대상은 drag-complete 추가 (비활성화로 보이게)
                ui.item.addClass('drag-complete');

                // 드래그 한것과 드래그 된것을 일치시켜주기 위한 data속성
                ui.item.attr('data', dragData);
            }
        }); 

        // 우측 공통 데이터 리스트
        $( "#speakingBattle-contents .data-list-wrap .data-info-card").draggable({
            cancel: ".temp-save-wrap, .drag-complete", // (2020-12-04)
            connectToSortable: "#speakingBattle-contents .lesson-list-wrap .accordion-cont-wrap",
            helper: "clone",
            appendTo: '#speakingBattle-contents',
            start:function(){
                contextMenu.hide(); // 드래그 시작할때 contextMenu 나와있으면 숨김
            },
        });

        // 우측 다중체크할때 나오는 데이터 박스 (2021-06-22)
        $( "#speakingBattle-contents .drag-all-card").draggable({
            cancel: ".temp-save-wrap",
            connectToSortable: "#speakingBattle-contents .lesson-list-wrap .accordion-cont-wrap",
            helper: "clone",
            appendTo: '#speakingBattle-contents',
            start:function(){
                contextMenu.hide(); // 드래그 시작할때 contextMenu 나와있으면 숨김
            },
        });

        // 우측 체크박스 전체
        var checkCount = 0; // 전체 드래그 박스 관련 카운트
        $("#data-list-checkAll").change(function() {
            var checkBoxLength = $("#speakingBattle-contents .right-box-wrap .data-list input[type=checkbox]").length;

            if (this.checked) {
                $("#speakingBattle-contents .right-box-wrap .data-list input[type=checkbox]").each(function() {
                    if(!$(this).parent().hasClass('drag-complete')){
                        $('.drag-all-card-wrap').addClass('show');
                        $("#speakingBattle-contents .drag-item-wrap .drag-item .data-info-card").addClass('on'); // 전체 data-info-card 선 색상 변경
                        checkCount = checkBoxLength;
                        this.checked=true;
                    }
                });
            } else {
                $("#speakingBattle-contents .right-box-wrap .data-list input[type=checkbox]").each(function() {
                    $('.drag-all-card-wrap').removeClass('show');
                    $("#speakingBattle-contents .drag-item-wrap .drag-item .data-info-card").removeClass('on'); // 전체 data-info-card 선 색상 변경
                    checkCount = 0;
                    this.checked=false;
                });
            }
            dragAllCount();
        });
        
        // 우측 체크박스 개별
        $("#speakingBattle-contents .right-box-wrap .data-list input[type=checkbox]").click(function () {
            if ($(this).is(":checked")) {
                var isAllChecked = 0;

                checkCount ++;
                dragAllCount();

                $("#speakingBattle-contents .right-box-wrap .data-list input[type=checkbox]").each(function() {
                    if (!this.checked){
                        if(!$(this).parent().hasClass('drag-complete')){
                            isAllChecked = 1;
                        }
                    }                
                });

                if (isAllChecked == 0) {
                    $("#data-list-checkAll").prop("checked", true);
                }     
            }
            else {
                checkCount --;
                dragAllCount();

                $("#data-list-checkAll").prop("checked", false);
            }
        });
    </script>
</body>
</html>