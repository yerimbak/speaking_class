<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="../../js/jquery-1.12.4.js"></script>
    <script src="../../js/jquery-ui.js"></script>
    <link rel="stylesheet" href="../../css/reset.css">
    <link rel="stylesheet" href="../../css/studio.css">
    <link rel="stylesheet" href="Class.css">
    <link rel="stylesheet" href="../../css/simplebar.css">
</head>
<body>
    <div id="root">
        <div class="container">
            <div id="header" class="tab-select"> <!-- 탭이 선택되면 tab-select 추가 (밑줄 사라짐)-->
                <div class="header-inner">
                    <div class="logo-wrap">
                        <h1><a href="#"><img src="../../img/logo_studio.png" alt=""></a></h1>
                    </div>
                    <div class="header-tab-wrap">
                        <div class="inner">
                            <div class="tab on thema-purple"> <!-- thema-green, pink, orange, purple 로 색변경 / 활성화된건 on -->
                                <div class="tab-inner">
                                    <p>생활회화 A반 생활회화 A반</p>
                                    <button class="btn-header-tab-close"></button>
                                </div>
                            </div>
                            <div class="tab thema-orange">
                                <div class="tab-inner">
                                    <p>생활회화 A반 생활회화 A반</p>
                                    <button class="btn-header-tab-close"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile-wrap">
                        <div class="profile-info-wrap">
                            <div class="academy">현대영어사</div>
                            <div class="bar"></div>
                            <div class="user"><strong>김선생</strong> (선생님)</div> 
                        </div>
                        <div class="profile-menu-wrap">
                            <button class="btn-profile-menu"></button>                            
                        </div>
                    </div>
                </div>
            </div>
            <div id="contents" class="thema-purple"> <!-- thema-green, pink, orange, purple 로 색변경 -->
                <div class="contents-inner">

                    <div id="edit">
                        <div class="class-info-title-wrap">
                            <div class="title-wrap">
                                <div class="top-wrap">
                                    <div class="academy">현대영어사</div>
                                    <div class="bar"></div>
                                    <div class="className text-thema-color">생활회화 A반</div>
                                    <button class="btn-edit"></button>
                                </div>
                                <div class="btm-wrap">
                                    <div class="type-badge">기본</div>
                                    <div class="lang">학습 언어: 영어 - 가이드 언어: 한국어</div>
                                    <div class="date">2020-09-01 ~ 2020-12-31</div>
                                    <div class="pass-standard">통과기준(낮음)</div>
                                    <button class="btn-invite-code btn-thema-color">초대코드 <strong>123456</strong></button>
                                </div>
                            </div>
                            <div class="publishing-wrap">
                                <p>최근 퍼블리싱  <strong>2020-11-11 15:30</strong></p>
                                <button class="btn-navy">앱 퍼블리싱</button>
                            </div>
                        </div>
                        <div class="edit-cont-wrap">
                            <div class="edit-tab-wrap">
                                <div class="btn-thema-color">수강생</div>
                                <div class="btn-thema-color on">학습 콘텐츠</div>
                                <div class="btn-thema-color">리포트</div>
                            </div>
                            <div class="edit-box-wrap">
                                <div class="tab-cont-wrap">
                                    <div class="tab-cont"></div>
                                    <div class="tab-cont on">
                                        <!-- 학습 콘텐츠 -->
                                        <div id="edit-learning-contents">
                                            <div class="edit-lesson-wrap box-wrap">
                                                <div class="tab-title-wrap">
                                                    레슨 <strong>5개</strong> / 학습 <strong>30개</strong>
                                                    <button class="btn-edit">편집</button>   
                                                </div>
                                                <div class="lesson-list-cont-wrap">
                                                    <div class="scroll-wrap" data-simplebar data-simplebar-auto-hide="false">
                                                        <div class="lesson-resist-wrap">
                                                            <input type="text" placeholder="레슨명">
                                                            <button class="btn-thema-color">+ 레슨 등록</button>
                                                        </div>
                                                        <div class="lesson-list-wrap">                                                    
                                                            <div class="lesson-box-wrap">
                                                                <div class="accordion-wrap"> <!-- close 추가시 닫힘 -->
                                                                    <div class="accordion-title">1주차 스피킹 과제</div>
                                                                    <div class="accordion-cont-wrap">
                                                                        <div class="lesson-item">
                                                                            <div class="num">1</div>
                                                                            <div class="data-info-card cardType-contents">
                                                                                <div class="text-wrap">
                                                                                    <div class="top-text-wrap">
                                                                                        <p>I Want a Cheeseburger.</p>
                                                                                    </div>
                                                                                    <div class="btm-text-wrap">
                                                                                        <p>치즈버거 하나 주세요.</p>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="date">2020-10-22 15:20</div>
                                                                                <button class="btn-card-delete"></button>
                                                                            </div>
                                                                        </div>
                                                                        <div class="lesson-item">
                                                                            <div class="num">2</div>
                                                                            <div class="data-info-card cardType-contents">
                                                                                <div class="text-wrap">
                                                                                    <div class="top-text-wrap">
                                                                                        <p>I Want a Cheeseburger.</p>
                                                                                    </div>
                                                                                    <div class="btm-text-wrap">
                                                                                        <p>치즈버거 하나 주세요.</p>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="date">2020-10-22 15:20</div>
                                                                                <button class="btn-card-delete"></button>
                                                                            </div>
                                                                        </div>
                                                                        <div class="lesson-empty empty-hide"> <!-- 빈칸 안내문 안보여질땐 empty-hide 추가 -->
                                                                            <div class="item-empty">
                                                                                <p>레슨에 포함할 학습을 오른쪽 목록에서 마우스로 끌어 담아보세요.</p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="lesson-box-wrap"> <!-- 드래그 하는 커서가 들어오면 drag-enter 클래스 추가 -->
                                                                <div class="accordion-wrap"> <!-- close 추가시 닫힘 -->
                                                                    <div class="accordion-title">1주차 스피킹 과제</div>
                                                                    <div class="accordion-cont-wrap">
                                                                        <div class="lesson-item">
                                                                            <div class="num">1</div>
                                                                            <div class="data-info-card cardType-contents">
                                                                                <div class="text-wrap">
                                                                                    <div class="top-text-wrap">
                                                                                        <p>I Want a Cheeseburger.</p>
                                                                                    </div>
                                                                                    <div class="btm-text-wrap">
                                                                                        <p>치즈버거 하나 주세요.</p>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="date">2020-10-22 15:20</div>
                                                                                <button class="btn-card-delete"></button>
                                                                            </div>
                                                                        </div>
                                                                        <div class="lesson-item">
                                                                            <div class="num">2</div>
                                                                            <div class="data-info-card cardType-contents">
                                                                                <div class="text-wrap">
                                                                                    <div class="top-text-wrap">
                                                                                        <p>I Want a Cheeseburger.</p>
                                                                                    </div>
                                                                                    <div class="btm-text-wrap">
                                                                                        <p>치즈버거 하나 주세요.</p>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="date">2020-10-22 15:20</div>
                                                                                <button class="btn-card-delete"></button>
                                                                            </div>
                                                                        </div>
                                                                        <div class="lesson-empty empty-hide">
                                                                            <div class="item-empty">
                                                                                <p>레슨에 포함할 학습을 오른쪽 목록에서 마우스로 끌어 담아보세요.</p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="lesson-box-wrap">
                                                                <div class="accordion-wrap">
                                                                    <div class="accordion-title">1주차 스피킹 과제</div>
                                                                    <div class="accordion-cont-wrap">
                                                                        <div class="lesson-empty">
                                                                            <div class="item-empty">
                                                                                <p>레슨에 포함할 학습을 오른쪽 목록에서 마우스로 끌어 담아보세요.</p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="lesson-box-wrap">
                                                                <div class="accordion-wrap">
                                                                    <div class="accordion-title">1주차 스피킹 과제</div>
                                                                    <div class="accordion-cont-wrap">
                                                                        <div class="lesson-empty">
                                                                            <div class="item-empty">
                                                                                <p>레슨에 포함할 학습을 오른쪽 목록에서 마우스로 끌어 담아보세요.</p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="common-edit-data-list-wrap box-wrap">
                                                <div class="top-title-wrap">
                                                    <strong>학습 라이브러리</strong>
                                                    <div class="btn-wrap">
                                                        <button class="btn-thema-color">직접 등록</button>
                                                        <button class="btn-thema-color">엑셀 등록</button>
                                                        <button class="btn-deepBlue">스토어 가져오기</button>
                                                    </div>
                                                </div>
                                                <div class="data-list-wrap">
                                                    <div class="data-title-wrap">
                                                        <div class="inner">
                                                            <div class="search-wrap">
                                                                <div class="search show"> <!-- show 추가시 인풋필드랑 버튼 보임 , input에 포커스시 focus클래스 추가-->
                                                                    <button class="btn-search"></button>
                                                                    <input type="text" placeholder="학습명을 검색하세요.">
                                                                    <button class="btn-search-close"></button>
                                                                </div>
                                                            </div>
                                                            <div class="fillter-wrap">
                                                                <div class="on">최신순</div>
                                                                <div class="bar"></div>
                                                                <div>이름순</div>
                                                                <div class="bar"></div>
                                                                <div>클래스별</div>
                                                            </div>
                                                            <div class="checkBox-wrap">
                                                                <input type="checkbox" id="class-regist">
                                                                <label for="class-regist">클래스 미등록</label>
                                                            </div>
                                                        </div>
                                                        <div class="search-history-wrap"> <!-- show 추가시 보임 -->
                                                            <div class="search-history-item"><span>신사동 초등학교 신사동 초등학교 신사동 초등학교 신사동 초등학교</span><button class="btn-delete-search-history"></button></div>
                                                            <div class="search-history-item"><span>신사동 초등학교</span><button class="btn-delete-search-history"></button></div>
                                                            <div class="search-history-item"><span>신사동</span><button class="btn-delete-search-history"></button></div>
                                                            <div class="search-history-item"><span>신사동 초</span><button class="btn-delete-search-history"></button></div>
                                                            <div class="search-history-item"><span>신사동 초등학교</span><button class="btn-delete-search-history"></button></div>
                                                            <div class="search-history-item"><span>3학년</span><button class="btn-delete-search-history"></button></div>
                                                            <div class="search-history-item"><span>2학년 영어</span><button class="btn-delete-search-history"></button></div>
                                                        </div>
                                                    </div>
                                                    <div class="data-list">
                                                        <div class="scroll-wrap" data-simplebar data-simplebar-auto-hide="false">
                                                            <div class="contents-empty-img-wrap">
                                                                <img src="../../img/img_search_empty.png" alt="">
                                                                <p><strong>검색 결과가 없습니다.</strong></p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>                                            
                                        </div>
                                    </div>
                                    <div class="tab-cont"></div>
                                </div>
                            </div>
                        </div>
                        <div class="copyright-wrap">
                            <div class="copyright-link-wrap">
                                <a href="#">이용약관</a>
                                <a href="#"><strong>개인정보처리방침</strong></a>
                                <div class="bar"></div>
                            </div>
                            <p class="copyright">Copyright ©2020 LG CNS. All right reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../../js/simplebar.js"></script>
    <script src="../../js/common.js"></script>
    <script>
        $( "#edit-learning-contents .lesson-list-wrap .accordion-cont-wrap").sortable({
            placeholder:"drag-enter-bg", // 드래그 들어왔을때 영역 표시
            cancel: ".lesson-item, .lesson-empty",
            over:function(){
                // 드래그해서 안에 들어왔을 때

                // 테두리 표시를 위한 drag-enter
                $(this).parents('.lesson-box-wrap').addClass('drag-enter');                

                // 빈칸 안내문구 잠시 안보이기
                $(this).find('.lesson-empty').addClass('hide');
            },            
            out:function(){
                // 드래그했다 나갔을 때

                // 테두리 제거
                $(this).parents('.lesson-box-wrap').removeClass('drag-enter');

                // 빈칸 안내문구 다시 보이기
                $(this).find('.lesson-empty').removeClass('hide');
            },
            update:function(event, ui){
                // 내용 바뀌었을때
                var text_top = ui.item.find('.top-text-wrap').html();
                var text_btm = ui.item.find('.btm-text-wrap').html();

                // 드래그 된 내용 재생성
                var html = '';
                html += '<div class="num"></div>'
                html += '<div class="data-info-card cardType-contents">'
                html += '<div class="text-wrap">'
                html += '<div class="top-text-wrap">' + text_top + '</div>'
                html += '<div class="btm-text-wrap">' + text_btm + '</div>'
                html += '</div>'
                html += '<div class="date">2020-10-22 15:20</div>'
                html += '<button class="btn-card-delete"></button>'
                html += '</div>'
                html += '</div>'
                ui.item.attr('class', 'lesson-item');
                ui.item.html(html);

                // 빈칸 안내문구 안보이기
                $(this).find('.lesson-empty').addClass('empty-hide');
                
                // index 
                $(this).find('.lesson-item').each(function(i, box){
                    $(box).find(".num").html(i + 1);
                })
            }
        }); 

        // 우측 공통 데이터 리스트
        $( ".common-edit-data-list-wrap .data-info-card").draggable({
            handle: ".drag-point1",
            connectToSortable: "#edit-learning-contents .lesson-list-wrap .accordion-cont-wrap",
            helper: "clone",
            appendTo: '#edit-learning-contents',
            
        });

        // 삭제버튼 (실제로는 팝업도 떠야합니다.)
        $('.lesson-list-wrap').on('click', '.btn-card-delete', function(e){
            var accordion_cont_wrap = $(this).parents('.accordion-cont-wrap');

            $(this).parents('.lesson-item').remove();

            // index 
            accordion_cont_wrap.find('.lesson-item').each(function(i, box){
                $(box).find(".num").html(i + 1);
            })

            // 빈간 안내문구 표시
            if(accordion_cont_wrap.find('.lesson-item').length == 0){
                accordion_cont_wrap.find('.lesson-empty').removeClass('empty-hide')
            }
        })

        // 아코디언 닫았을때 버그 수정 (스크롤 관련)
        $('#edit-learning-contents .accordion-title').on('click', function(){
            var scrollContainer = document.querySelector('.simplebar-content-wrapper'); 
            var _scrollTop = scrollContainer.scrollTop;
            
            scrollContainer.scrollTop = _scrollTop - 1;
            scrollContainer.scrollTop = _scrollTop;
        })
    </script>
</body>
</html>