<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="../../js/jquery-1.12.4.js"></script>
    <script src="../../js/jquery-ui.js"></script>
    <link rel="stylesheet" href="../../css/reset.css">
    <link rel="stylesheet" href="../../css/studio.css">
    <link rel="stylesheet" href="Class.css">
    <link rel="stylesheet" href="../../css/simplebar.css">
</head>
<body class="scroll-hidden"> <!-- 팝업 나왔을때 scroll-hidden 추가-->
    <div id="root">
        <div class="container">
            <div id="header" class="tab-select"> <!-- 탭이 선택되면 tab-select 추가 (밑줄 사라짐)-->
                <div class="header-inner">
                    <div class="logo-wrap">
                        <h1><a href="#"><img src="../../img/logo_studio.png" alt=""></a></h1>
                    </div>
                    <div class="header-tab-wrap">
                        <div class="inner">
                            <div class="tab on thema-purple"> <!-- thema-green, pink, orange, purple 로 색변경 / 활성화된건 on -->
                                <div class="tab-inner">
                                    <p>생활회화 A반 생활회화 A반</p>
                                    <button class="btn-header-tab-close"></button>
                                </div>
                            </div>
                            <div class="tab thema-orange">
                                <div class="tab-inner">
                                    <p>생활회화 A반 생활회화 A반</p>
                                    <button class="btn-header-tab-close"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile-wrap">
                        <div class="profile-info-wrap">
                            <div class="academy">현대영어사</div>
                            <div class="bar"></div>
                            <div class="user"><strong>김선생</strong> (선생님)</div> 
                        </div>
                        <div class="profile-menu-wrap">
                            <button class="btn-profile-menu"></button>                            
                        </div>
                    </div>
                </div>
            </div>
            <div id="contents" class="thema-purple"> <!-- thema-green, pink, orange, purple 로 색변경 -->
                <div class="contents-inner">

                    <div id="edit">
                        <div class="class-info-title-wrap">
                            <div class="title-wrap">
                                <div class="top-wrap">
                                    <div class="academy">현대영어사</div>
                                    <div class="bar"></div>
                                    <div class="className text-thema-color">생활회화 A반</div>
                                    <button class="btn-edit"></button>
                                </div>
                                <div class="btm-wrap">
                                    <div class="lang">학습 언어: 영어 - 가이드 언어: 한국어</div>
                                    <div class="date">2020-09-01 ~ 2020-12-31</div>
                                </div>
                            </div>
                            <div class="publishing-wrap">
                                <p>최근 퍼블리싱  <strong>2020-11-11 15:30</strong></p>
                                <button class="btn-navy">앱 퍼블리싱</button>
                            </div>
                        </div>
                        <div class="edit-cont-wrap">
                            <div class="edit-tab-wrap">
                                <div class="btn-thema-color">수강생</div>
                                <div class="btn-thema-color on">학습 콘텐츠</div>
                                <div class="btn-thema-color">리포트</div>
                            </div>
                            <div class="edit-box-wrap">
                                <div class="tab-cont-wrap">
                                    <div class="tab-cont on">
                                        
                                    </div>
                                    <div class="tab-cont">
                                        
                                    </div>
                                    <div class="tab-cont"></div>
                                </div>
                            </div>
                        </div>
                        <div class="copyright-wrap">
                            <div class="copyright-link-wrap">
                                <a href="#">이용약관</a>
                                <a href="#"><strong>개인정보처리방침</strong></a>
                                <div class="bar"></div>
                            </div>
                            <p class="copyright">Copyright ©2020 LG CNS. All right reserved.</p>
                        </div>
                    </div>

                    <!-- 팝업 -->
                    <div class="modal-wrap">
                        <div class="modal-contents-edit">
                            <div class="modal-title-wrap">
                                <strong>학습콘텐츠 편집하기</strong>
                                <button class="btn-modal-title-close"></button>
                            </div>
                            <div class="modal-cont-wrap">
                                <div class="scroll-wrap" data-simplebar data-simplebar-auto-hide="false">
                                    <div class="all-close-open-wrap">
                                        <button class="btn-open">전체 열기</button>
                                        <button class="btn-close">전체 닫기</button>
                                    </div>
                                    <div class="contents-list-wrap">
                                        <div class="list-box-wrap">
                                            <div class="accordion-wrap"> <!-- close 추가시 닫힘 -->
                                                <div class="accordion-title">
                                                    <div class="inner">
                                                        <input type="text" value="1주차 스피킹 과제" readonly>
                                                        <button class="btn-edit-title-confirm">수정</button>
                                                    </div>
                                                </div>
                                                <div class="accordion-cont-wrap">
                                                    <div class="lesson-item-empty">
                                                        <p>추가된 학습이 없습니다.</p>
                                                    </div>
                                                </div>
                                                <div class="accordion-edit-btn-wrap">
                                                    <button class="btn-edit-title"></button>
                                                    <button class="btn-sort-up disable"></button> <!-- 비활성화 disable -->
                                                    <button class="btn-sort-down"></button>
                                                    <button class="btn-accordion-delete"></button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="list-box-wrap">
                                            <div class="accordion-wrap"> <!-- close 추가시 닫힘 -->
                                                <div class="accordion-title">
                                                    <div class="inner">
                                                        <input type="text" value="2주차 스피킹 과제" readonly>
                                                        <button class="btn-edit-title-confirm">수정</button>
                                                    </div>
                                                </div>
                                                <div class="accordion-cont-wrap">
                                                    <div class="lesson-item">
                                                        <div class="data-info-card">
                                                            <div class="text-wrap">
                                                                <div class="top-text-wrap">
                                                                    <div class="tag tag-short">단문</div>
                                                                    <p>I Want a Cheeseburger.</p>
                                                                </div>
                                                                <div class="btm-text-wrap">
                                                                    <p>치즈버거 하나 주세요.</p>
                                                                </div>
                                                            </div>
                                                            <div class="drag-point2"></div>
                                                        </div>
                                                    </div>
                                                    <div class="lesson-item">
                                                        <div class="data-info-card">
                                                            <div class="text-wrap">
                                                                <div class="top-text-wrap">
                                                                    <div class="tag tag-short">단문</div>
                                                                    <p>I Want a Cheeseburger.</p>
                                                                </div>
                                                                <div class="btm-text-wrap">
                                                                    <p>치즈버거 하나 주세요.</p>
                                                                </div>
                                                            </div>
                                                            <div class="drag-point2"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="accordion-edit-btn-wrap">
                                                    <button class="btn-edit-title"></button>
                                                    <button class="btn-sort-up"></button>
                                                    <button class="btn-sort-down"></button>
                                                    <button class="btn-accordion-delete"></button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="list-box-wrap">
                                            <div class="accordion-wrap"> <!-- close 추가시 닫힘 -->
                                                <div class="accordion-title">
                                                    <div class="inner">
                                                        <input type="text" value="3주차 스피킹 과제" readonly>
                                                        <button class="btn-edit-title-confirm">수정</button>
                                                    </div>
                                                </div>
                                                <div class="accordion-cont-wrap">
                                                    <div class="lesson-item">
                                                        <div class="data-info-card">
                                                            <div class="text-wrap">
                                                                <div class="top-text-wrap">
                                                                    <div class="tag tag-conv">대화</div>
                                                                    <p>I Want a Cheeseburger.</p>
                                                                </div>
                                                                <div class="btm-text-wrap">
                                                                    <p>치즈버거 하나 주세요.</p>
                                                                </div>
                                                            </div>
                                                            <div class="drag-point2"></div>
                                                        </div>
                                                    </div>
                                                    <div class="lesson-item">
                                                        <div class="data-info-card">
                                                            <div class="text-wrap">
                                                                <div class="top-text-wrap">
                                                                    <div class="tag tag-conv">대화</div>
                                                                    <p>I Want a Cheeseburger.</p>
                                                                </div>
                                                                <div class="btm-text-wrap">
                                                                    <p>치즈버거 하나 주세요.</p>
                                                                </div>
                                                            </div>
                                                            <div class="drag-point2"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="accordion-edit-btn-wrap">
                                                    <button class="btn-edit-title"></button>
                                                    <button class="btn-sort-up"></button> 
                                                    <button class="btn-sort-down disable"></button> <!-- 비활성화 disable -->
                                                    <button class="btn-accordion-delete"></button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer-wrap">
                                <div class="modal-footer-btn-wrap">
                                    <button class="btn-line">취소</button>
                                    <button class="btn-navy">저장</button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <script src="../../js/simplebar.js"></script>
    <script src="../../js/common.js"></script>
    <script>

        $( ".modal-contents-edit .list-box-wrap .accordion-cont-wrap").sortable({
            placeholder:"drag-enter-bg", // 드래그 들어왔을때 영역 표시
            handle: ".drag-point2",
            containment: ".modal-contents-edit",

            // 스크롤 됐을 때, 이상한곳에서 드래그 시작됨 방지
            sort: function(event, ui) {
                var $target = $(event.target);
                if (!/html|body/i.test($target.offsetParent()[0].tagName)) {
                    var top = event.pageY - $target.offsetParent().offset().top - (ui.helper.outerHeight(true) / 2);
                    ui.helper.css({'top' : top + 'px'});
                }
            },
        }); 

        // 스크롤 된 상태에서, 드래그하면 스크롤 움직이는 현상 방지(강제 높이값)
        $('.modal-contents-edit .list-box-wrap .accordion-wrap').each(function(index){
            var _height = $(this).height();
            $(this).height(_height + 'px');
        })

        // 레슨 타이틀 수정 
        $('.accordion-wrap .btn-edit-title').on('click', function(){
            var parents_accordion = $(this).parents('.accordion-wrap');
            parents_accordion.addClass('edit-title');
            parents_accordion.find('.accordion-title input').attr('readonly', false);
        })
        $('.accordion-wrap .btn-edit-title-confirm').on('click', function(e){
            e.stopPropagation();
            var parents_accordion = $(this).parents('.accordion-wrap');
            parents_accordion.removeClass('edit-title');
            parents_accordion.find('.accordion-title input').attr('readonly', true);
        })
    </script>
</body>
</html>