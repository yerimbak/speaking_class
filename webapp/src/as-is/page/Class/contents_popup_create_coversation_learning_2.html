<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="../../css/reset.css">
    <link rel="stylesheet" href="../../css/studio.css">
    <link rel="stylesheet" href="Class.css">
    <link rel="stylesheet" href="../../css/simplebar.css">
    <script src="../../js/jquery-1.12.4.js"></script>
    <script src="../../js/jquery-ui.js"></script>
</head>
<body class="scroll-hidden"> <!-- 팝업 나왔을때 scroll-hidden 추가-->
    <div id="root">
        <div class="container">
            <div id="header" class="tab-select"> <!-- 탭이 선택되면 tab-select 추가 (밑줄 사라짐)-->
                <div class="header-inner">
                    <div class="logo-wrap">
                        <h1><a href="#"><img src="../../img/logo_studio.png" alt=""></a></h1>
                    </div>
                    <div class="header-tab-wrap">
                        <div class="inner">
                            <div class="tab on thema-purple"> <!-- thema-green, pink, orange, purple 로 색변경 / 활성화된건 on -->
                                <div class="tab-inner">
                                    <p>생활회화 A반 생활회화 A반</p>
                                    <button class="btn-header-tab-close"></button>
                                </div>
                            </div>
                            <div class="tab thema-orange">
                                <div class="tab-inner">
                                    <p>생활회화 A반 생활회화 A반</p>
                                    <button class="btn-header-tab-close"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile-wrap">
                        <div class="profile-info-wrap">
                            <div class="academy">현대영어사</div>
                            <div class="bar"></div>
                            <div class="user"><strong>김선생</strong> (선생님)</div> 
                        </div>
                        <div class="profile-menu-wrap">
                            <button class="btn-profile-menu"></button>                            
                        </div>
                    </div>
                </div>
            </div>
            <div id="contents" class="thema-purple"> <!-- thema-green, pink, orange, purple 로 색변경 -->
                <div class="contents-inner">

                    <div id="edit">
                        <div class="class-info-title-wrap">
                            <div class="title-wrap">
                                <div class="top-wrap">
                                    <div class="academy">현대영어사</div>
                                    <div class="bar"></div>
                                    <div class="className text-thema-color">생활회화 A반</div>
                                    <button class="btn-edit"></button>
                                </div>
                                <div class="btm-wrap">
                                    <div class="lang">학습 언어: 영어 - 가이드 언어: 한국어</div>
                                    <div class="date">2020-09-01 ~ 2020-12-31</div>
                                </div>
                            </div>
                            <div class="publishing-wrap">
                                <p>최근 퍼블리싱  <strong>2020-11-11 15:30</strong></p>
                                <button class="btn-navy">앱 퍼블리싱</button>
                            </div>
                        </div>
                        <div class="edit-cont-wrap">
                            <div class="edit-tab-wrap">
                                <div class="btn-thema-color">수강생</div>
                                <div class="btn-thema-color on">학습 콘텐츠</div>
                                <div class="btn-thema-color">리포트</div>
                            </div>
                            <div class="edit-box-wrap">
                                <div class="tab-cont-wrap">
                                    <div class="tab-cont on">
                                        
                                    </div>
                                    <div class="tab-cont">
                                        
                                    </div>
                                    <div class="tab-cont"></div>
                                </div>
                            </div>
                        </div>
                        <div class="copyright-wrap">
                            <div class="copyright-link-wrap">
                                <a href="#">이용약관</a>
                                <a href="#"><strong>개인정보처리방침</strong></a>
                                <div class="bar"></div>
                            </div>
                            <p class="copyright">Copyright ©2020 LG CNS. All right reserved.</p>
                        </div>
                    </div>

                    <!-- 팝업 -->
                    <div class="modal-wrap"> 
                        <div class="modal-create-conversation-learning type-conversation"> <!-- 대화학습 팝업에는 type-conversation 클래스 추가 -->
                            <div class="modal-title-wrap">
                                <div class="badge type1">대화</div>
                                <strong>전체 대화 만들기</strong>
                                <button class="btn-modal-title-close" tabindex="-1"></button>
                            </div>
                            <div class="modal-cont-wrap">
                                <div class="create-step-wrap">
                                    <div class="scroll-wrap" data-simplebar data-simplebar-auto-hide="false">

                                        <!-- 전체 대화 만들기 -->
                                        <div class="step-wrap step-total-converstaion">
                                            <p class="notice-text">학습할 전체 대화를 만들어 주세요.</p>
                                            <div class="conversation-cont-box-wrap">
                                                <div class="box-item">
                                                    <div class="btn-order-wrap">
                                                        <span>챗봇 발화 우선</span>
                                                        <button class="btn-order"></button>
                                                    </div>
                                                    <div class="box-title">대화 1 <span>*</span></div>
                                                    <div class="box-wrap">
                                                        <div class="input-group-wrap group-chatbot">
                                                            <div class="group-title type-question">챗봇</div>
                                                            <div class="input-wrap">                                                                
                                                                <textarea oninput="textareaAutoHeight(this)" placeholder="챗봇 발화(영어)를 입력해 주세요."></textarea>
                                                                <div class="input-validation-tooltip show"> <!-- show 추가시 출력 -->
                                                                    <p>영어만 입력 가능합니다.</p>
                                                                    <button class="btn-validation-close"></button>
                                                                </div>
                                                            </div>
                                                            <div class="input-wrap">
                                                                <textarea oninput="textareaAutoHeight(this)" placeholder="챗봇 발화 해석(한국어)을 입력해 주세요."></textarea>
                                                            </div>
                                                        </div>
                                                        <div class="input-group-wrap">
                                                            <div class="group-title type-answer">학습자</div>
                                                            <div class="input-wrap">
                                                                <textarea oninput="textareaAutoHeight(this)" placeholder="학습자 모범 발화(영어)를 입력해 주세요."></textarea>
                                                            </div>
                                                            <div class="add-answer-wrap">
                                                                <div class="add-text-wrap">
                                                                    <p>같은 의미의 답변을 최대 3개까지 등록할 수 있습니다. 수강생은 하나의 답변을 선택하여 학습합니다.</p>
                                                                    <button class="btn-line-dNavy btn-add-answer">답변 추가</button>  <!-- disable 추가시 비활성 -->
                                                                </div>
                                                            </div>
                                                            <div class="input-wrap">
                                                                <textarea oninput="textareaAutoHeight(this)" placeholder="학습자 모범 발화 해석(한국어)을 입력해 주세요."></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="box-item">
                                                    <div class="btn-order-wrap">
                                                        <span>챗봇 발화 우선</span>
                                                        <button class="btn-order"></button>
                                                    </div>
                                                    <div class="box-title">대화 2 <span>*</span></div>
                                                    <div class="box-wrap">
                                                        <div class="input-group-wrap group-chatbot">
                                                            <div class="group-title type-question">챗봇</div>
                                                            <div class="input-wrap">
                                                                <textarea oninput="textareaAutoHeight(this)" placeholder="챗봇 발화(영어)를 입력해 주세요."></textarea>
                                                            </div>
                                                            <div class="input-wrap">
                                                                <textarea oninput="textareaAutoHeight(this)" placeholder="챗봇 발화 해석(한국어)을 입력해 주세요."></textarea>
                                                            </div>
                                                        </div>
                                                        <div class="input-group-wrap">
                                                            <div class="group-title type-answer">학습자</div>
                                                            <div class="input-wrap">
                                                                <textarea oninput="textareaAutoHeight(this)" placeholder="학습자 모범 발화(영어)를 입력해 주세요."></textarea>
                                                            </div>
                                                            <div class="add-answer-wrap">
                                                                <div class="add-text-wrap">
                                                                    <p>같은 의미의 답변을 최대 3개까지 등록할 수 있습니다. 수강생은 하나의 답변을 선택하여 학습합니다.</p>
                                                                    <button class="btn-line-dNavy btn-add-answer">답변 추가</button>  <!-- disable 추가시 비활성 -->
                                                                </div>
                                                            </div>
                                                            <div class="input-wrap">
                                                                <textarea oninput="textareaAutoHeight(this)" placeholder="학습자 모범 발화 해석(한국어)을 입력해 주세요."></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="box-item">
                                                    <div class="btn-order-wrap">
                                                        <span>챗봇 발화 우선</span>
                                                        <button class="btn-order"></button>
                                                    </div>
                                                    <div class="box-title">대화 3 <span>*</span></div>
                                                    <div class="box-wrap">
                                                        <div class="input-group-wrap group-chatbot">
                                                            <div class="group-title type-question">챗봇</div>
                                                            <div class="input-wrap">
                                                                <textarea oninput="textareaAutoHeight(this)" placeholder="챗봇 발화(영어)를 입력해 주세요."></textarea>
                                                            </div>
                                                            <div class="input-wrap">
                                                                
                                                                <textarea oninput="textareaAutoHeight(this)" placeholder="챗봇 발화 해석(한국어)을 입력해 주세요."></textarea>
                                                            </div>
                                                        </div>
                                                        <div class="input-group-wrap">
                                                            <div class="group-title type-answer">학습자</div>
                                                            <div class="input-wrap">
                                                                <textarea oninput="textareaAutoHeight(this)" placeholder="학습자 모범 발화(영어)를 입력해 주세요."></textarea>
                                                            </div>
                                                            <div class="add-answer-wrap">
                                                                <div class="add-text-wrap">
                                                                    <p>같은 의미의 답변을 최대 3개까지 등록할 수 있습니다. 수강생은 하나의 답변을 선택하여 학습합니다.</p>
                                                                    <button class="btn-line-dNavy btn-add-answer">답변 추가</button>  <!-- disable 추가시 비활성 -->
                                                                </div>
                                                            </div>
                                                            <div class="input-wrap">
                                                                <textarea oninput="textareaAutoHeight(this)" placeholder="학습자 모범 발화 해석(한국어)을 입력해 주세요."></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="sample-play-wrap type-conversation">
                                    <!-- 
                                        대화학습 만들기 : type-conversation
                                        대화학습 만들기 : type-shortSentence
                                     -->
                                    <div class="tab-nav-wrap">
                                        <ul>
                                            <li>표지</li> <!-- 활성화 on -->
                                            <li class="on">대화시도</li>
                                            <li>대화연습</li>
                                            <li>롤플레이</li>
                                        </ul>
                                    </div>
                                    <div class="play-area">
                                        <!-- 활성화 on -->
                                        <div class="play-item">
                                            <img src="../../img/img_create_conv_play_1.png" alt="">
                                        </div>
                                        <div class="play-item on">
                                            <img src="../../img/img_create_conv_play_2.png" alt="">
                                        </div>
                                        <div class="play-item">
                                            <img src="../../img/img_create_conv_play_3_1.gif" alt="">
                                            <!--
                                                img_create_conv_play_3_1 : 끊어말하기
                                                img_create_conv_play_3_2 : 2번 끊어 말하기
                                                img_create_conv_play_3_3 : 빈칸 채우기
                                                img_create_conv_play_3_4 : 연습 생략
                                            -->
                                        </div>
                                        <div class="play-item">
                                            <img src="../../img/img_create_conv_play_4.gif" alt="">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer-wrap">
                                <button class="btn-line btn-tempsave">임시저장</button>
                                <div class="modal-footer-btn-wrap">
                                    <button class="btn-deepBlue btn-prev">이전</button>
                                    <button class="btn-deepBlue btn-next">다음</button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <script src="../../js/simplebar.js"></script>
    <script src="../../js/common.js"></script>
    <script>

        // 전체 대화 만들기 > 답변 추가
        $.each($('.step-total-converstaion .add-answer-wrap'), function(index, item){
            var _parents = $(this);
            var _limitCount = $(this).find('.input-wrap').length;
            var _btnAddAnswer;

            if(_limitCount == 2){
                $(this).find('.btn-add-answer').addClass('disable')
            }

            // 답변추가 버튼
            $(this).find($('.btn-add-answer')).on('click', function(){
                _btnAddAnswer = $(this);
                console.log('aa')

                var input_html = '<div class="input-wrap"><textarea oninput="textareaAutoHeight(this)" placeholder="학습자 모범 발화(영어)를 입력해 주세요. (선택)"></textarea><button class="btn-delete-question"></button></div>';
                
                if(_limitCount < 2){
                    _btnAddAnswer.parent().before(input_html)
                    _limitCount++;

                    // 새로 만들어진 인풋에 포커스 이동
                    $(this).parents('.add-answer-wrap').find('.input-wrap').last().find('textarea').focus();
                }
                
                if (_limitCount == 2){
                    $(this).addClass('disable')
                }               

            })

            // 삭제 버튼
            $(this).on('click', '.btn-delete-question', function(){
                $(this).parent().remove();
                _limitCount--;    
                if (_limitCount < 2){
                    _parents.find('.btn-add-answer').removeClass('disable')
                }
            })            
        })          

        // 챗봇 학습자 위치변경
        $('.conversation-cont-box-wrap .btn-order').on('click', function(){
            var _this = $(this);
            var boxWrap = _this.parents('.box-item').find('.box-wrap');
            var chatBotClone = boxWrap.find('.group-chatbot').clone();

            boxWrap.find('.group-chatbot').remove();

            if(_this.hasClass('on')){
                boxWrap.prepend(chatBotClone);
                _this.prev().text('챗봇 발화 우선');
            }else {
                boxWrap.append(chatBotClone);
                _this.prev().text('학습자 발화 우선');
            }

            _this.toggleClass('on');
        })      
        
    </script>
</body>
</html>